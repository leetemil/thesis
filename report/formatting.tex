% Chapter formatting
\titleformat{\chapter} % command
    [display] % shape
    {\bfseries\huge} % format
    {\thechapter} % label
    {0.0pt} % separator
    {} % before-code
    [] % after-code

% % Spacing of sections         Left      Before spacing           After spacing      [right] (optional)
\titlespacing*{\chapter}      {0pt}{0pt plus 2pt minus 2pt}{8pt plus 2pt minus 2pt}
% \titlespacing*{\section}      {0pt}{8pt plus 2pt minus 2pt}{4pt plus 1pt minus 1pt}
% \titlespacing*{\subsection}   {0pt}{8pt plus 2pt minus 2pt}{2pt plus 1pt minus 1pt}
% \titlespacing*{\subsubsection}{0pt}{4pt plus 1pt minus 1pt}{2pt plus 1pt minus 1pt}

% Declaring definitions, theorems etc.
\newtheorem*{definition}{Definition}
\newtheorem*{theorem}{Theorem}
\newtheorem*{lemma}{Lemma}
\newtheorem*{claim}{Claim}
\newtheorem{corollary}{Corollary}
\newtheorem{example}{Example}

% Hyperref colors/setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,  
    urlcolor=cyan,
}

% -- Commands
% TODO macro
\newcommand{\todo}[1]{{\color{red} TODO: { #1 }}}

% Internal formatting method
\newcommand{\mo}[1]{{\mathopen{} #1 \mathclose{}}}

% Differential d
\newcommand*\diff{\mathop{}\!\mathrm{d}}

% Scaling parentheses
\newcommand{\prts}[1]{\mo{\left( #1 \right)}}

% Scaling brackets
\newcommand{\brts}[1]{\mo{\left[ #1 \right]}}

% Scaling curly brackets
\newcommand{\crts}[1]{\mo{\left\{ #1 \right\}}}

% Scaling curly brackets
\newcommand{\bars}[1]{\mo{\left| #1 \right|}}

% Expected value
\DeclareMathOperator*{\expectedvalue}{\mathbb{E}}
\newcommand{\E}[1]{\expectedvalue{\mo{\left[ #1 \right]}}}
% Variance
\newcommand{\Var}[1]{\mathrm{Var}{\mo{\left[ #1 \right]}}}

% frequent distributions
\newcommand{\q}{q(\ve{z} \mid \ve{x})}
\newcommand{\pzx}{p(\ve{z} \mid \ve{x})}
\newcommand{\pxz}{p(\ve{x} \mid \ve{z})}
\newcommand{\pz}{p(\ve{z})}
\newcommand{\px}{p(\ve{x})}

% Vector
\newcommand{\ve}[1]{\bm{ #1 }}

% Tensor
\newcommand{\te}[1]{\mathsf{ #1 }}

% Floor and ceil
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}

% Kullback-Leibler
\DeclareMathOperator{\kullbackliebler}{KL}
\newcommand{\kl}[2]{\kullbackliebler\mo{\left(#1 \parallel #2\right)}}

% Acknowledgements environment
\makeatletter
\newcommand\ackname{Acknowledgements}
\if@titlepage
   \newenvironment{acknowledgements}{%
       \titlepage
       \null\vfil
       \@beginparpenalty\@lowpenalty
       \begin{center}%
         \bfseries \ackname
         \@endparpenalty\@M
       \end{center}}%
      {\par\vfil\null\endtitlepage}
\else
   \newenvironment{acknowledgements}{%
       \if@twocolumn
         \section*{\abstractname}%
       \else
         \small
         \begin{center}%
           {\bfseries \ackname\vspace{-.5em}\vspace{\z@}}%
         \end{center}%
         \quotation
       \fi}
       {\if@twocolumn\else\endquotation\fi}
\fi
\makeatother
